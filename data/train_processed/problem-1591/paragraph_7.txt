Law does not dictate morality, it often correlates with it but it is not that simple. It only attempts to enforce agreements, atrocities are still atrocities. Throughout most of human history, cruelty was just a tool for war, but we slowly left that behind as we progressed. That does not make the cruelty of the past ok, but at least some of it had purpose. When things happened at smller scales, scaring your opponents into non confrontation was valuble, cutting off supplies during a siege and worsening conditions for people defending led to surrenders, etc. But there have also been many examples of cruelty done without purpose; inhumane tortures, lots and lots of raping of civilians, etc.