You misunderstand the law then. States can only ban issuing new marriage licenses. They cannot dissolve existing marriages and they must recognize legal gay and interracial marriages at the state level from other US states, and those recognized federally. This means that states that ban gay marriage still have to fulfill all spousal rights of gay marriages.